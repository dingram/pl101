<!DOCTYPE html>
<html>
	<head>
		<title>MUS interpreter</title>
		<link rel="stylesheet" type="text/css" href="../../css/styles.css">
		<link rel="stylesheet" type="text/css" href="../../lib/codemirror/codemirror.css">
		<script src="../../lib/jquery.min.js"></script>
		<script src="../../lib/codemirror/codemirror.js"></script>
		<script src="../../lib/codemirror/mode/scheme.js"></script>
		<script src="parser.js"></script>
		<script src="mus.js"></script>
		<style>
			#music-holder canvas { width: 990px; padding: 0; margin: 0; }
			#music-preview { width: 990px; padding: 0; margin: 0; }
			#keyboard { width: 990px; height: 46px; padding: 0; margin: 0; }
			#music-holder { width: 100%; height: 302px; padding: 0; margin: 0; overflow: auto; background: #fff; }
			#preview-holder { width: 1006px; height: 236px; padding: 0; margin: 0; background: #fff; overflow-y: scroll; }
		</style>
	</head>
	<body>
		<h1>MUS interpreter</h1>
		<section id="editor-holder">
			<textarea id="editor" rows="10" cols="50" autofocus></textarea>
		</section>
		<section id="results">
			<section id="error"></section>
			<div id="music-holder">
				<div id="preview-holder">
					<canvas id="music-preview"></canvas>
				</div>
				<canvas id="keyboard"></canvas>
			</div>
		</section>
		<section id="actions"><button id="play">Play</button></section>
		<section id="examples">
			<h2>Examples</h2>
			<p>Click an example to load into the editor</p>
			<pre class="example"><code><span class="op">&lt;</span> <span class="var">c4</span> <span class="var">e4</span> <span class="var">d4</span> <span class="op">&gt;</span><span class="op">/</span><span class="num">4</span></code></pre>
			<pre class="example"><code><span class="fn">\tempo</span> <span class="num">130</span>
<span class="fn">\instrument</span> <span class="str">"accordion"</span>
<span class="op">|:</span> <span class="var">d4</span><span class="op">/</span><span class="num">4</span> <span class="fn">\triplet</span><span class="op">{</span><span class="var">g</span><span class="op">/</span><span class="num">8</span> <span class="var">g</span> <span class="var">g</span><span class="op">}</span> <span class="var">g</span><span class="op">/</span><span class="num">4</span> <span class="fn">\triplet</span><span class="op">{</span><span class="var">g</span><span class="op">/</span><span class="num">8</span> <span class="var">g</span> <span class="var">g</span><span class="op">}</span> <span class="var">g</span><span class="op">/</span><span class="num">4</span> <span class="fn">\swung</span><span class="op">{</span><span class="var">b</span><span class="op">/</span><span class="num">8</span> <span class="var">g</span><span class="op">}</span> <span class="fn">\swung</span><span class="op">{</span><span class="var">b</span> <span class="var">d5</span><span class="op">}</span> <span class="fn">\swung</span><span class="op">{</span><span class="var">g</span> <span class="var">d</span><span class="op">}</span> <span class="fn">\swung</span><span class="op">{</span><span class="var">b4</span> <span class="var">g</span><span class="op">}</span>
<span class="fn">\triplet</span><span class="op">{</span><span class="var">d4</span><span class="op">/</span><span class="num">8</span> <span class="var">d</span> <span class="var">d</span><span class="op">}</span> <span class="var">d</span><span class="op">/</span><span class="num">4</span> <span class="fn">\triplet</span><span class="op">{</span><span class="var">d</span><span class="op">/</span><span class="num">8</span> <span class="var">d</span> <span class="var">d</span><span class="op">}</span> <span class="var">d</span><span class="op">/</span><span class="num">4</span> <span class="fn">\swung</span><span class="op">{</span><span class="var">f#</span><span class="op">/</span><span class="num">8</span> <span class="var">d</span><span class="op">}</span> <span class="fn">\swung</span><span class="op">{</span><span class="var">f#</span> <span class="var">a</span><span class="op">}</span> <span class="fn">\swung</span><span class="op">{</span><span class="var">c5</span> <span class="var">a4</span><span class="op">}</span> <span class="fn">\swung</span><span class="op">{</span><span class="var">f#</span> <span class="var">a</span><span class="op">}</span>
<span class="fn">\triplet</span><span class="op">{</span><span class="var">g4</span><span class="op">/</span><span class="num">8</span> <span class="var">g</span> <span class="var">g</span><span class="op">}</span> <span class="var">g</span><span class="op">/</span><span class="num">4</span> <span class="fn">\triplet</span><span class="op">{</span><span class="var">g</span><span class="op">/</span><span class="num">8</span> <span class="var">g</span> <span class="var">g</span><span class="op">}</span> <span class="var">g</span><span class="op">/</span><span class="num">4</span> <span class="fn">\swung</span><span class="op">{</span><span class="var">b</span><span class="op">/</span><span class="num">8</span> <span class="var">g</span><span class="op">}</span> <span class="fn">\swung</span><span class="op">{</span><span class="var">b</span> <span class="var">d5</span><span class="op">}</span> <span class="var">g</span><span class="op">/</span><span class="num">4</span> <span class="var">g</span>
<span class="fn">\swung</span><span class="op">{</span><span class="var">f#</span><span class="op">/</span><span class="num">8</span> <span class="var">a</span><span class="op">}</span> <span class="fn">\swung</span><span class="op">{</span><span class="var">g</span> <span class="var">f#</span><span class="op">}</span> <span class="fn">\swung</span><span class="op">{</span><span class="var">e</span> <span class="var">g</span><span class="op">}</span> <span class="fn">\swung</span><span class="op">{</span><span class="var">f#</span> <span class="var">e</span><span class="op">}</span> <span class="var">d</span><span class="op">/</span><span class="num">4</span> <span class="var">d</span> <span class="var">d</span> <span class="op">:|</span></code></pre>
			<pre class="example"><code><span class="cmt">% see <a href="http://xkcd.com/389/" target="_blank">http://xkcd.com/389/</a></span>

<span class="fn">\tempo</span> <span class="num">130</span>
<span class="op">&lt;&lt;</span>
  <span class="op">{</span>
    <span class="op">&lt;</span><span class="var">db4</span> <span class="var">gb</span> <span class="var">bb</span> <span class="var">db5</span><span class="op">&gt;</span><span class="op">/</span><span class="num">4.</span> <span class="op">&lt;</span><span class="var">eb4</span> <span class="var">ab</span> <span class="var">c5</span> <span class="var">eb</span><span class="op">&gt;</span> <span class="op">&lt;</span><span class="var">eb4</span> <span class="var">gb</span> <span class="var">ab</span><span class="op">&gt;</span><span class="op">/</span><span class="num">4</span>
    <span class="op">&lt;</span><span class="var">c4</span> <span class="var">f</span> <span class="var">ab</span> <span class="var">c5</span> <span class="var">eb</span><span class="op">&gt;</span><span class="op">/</span><span class="num">4.</span> <span class="op">&lt;</span><span class="var">f4</span> <span class="var">bb</span> <span class="var">db5</span> <span class="var">f</span><span class="op">&gt;</span> <span class="var">ab5</span><span class="op">/</span><span class="num">16</span> <span class="var">gb</span> <span class="var">f</span><span class="op">/</span><span class="num">8</span>
    <span class="op">&lt;</span><span class="var">db4</span> <span class="var">gb</span> <span class="var">bb</span> <span class="var">db5</span><span class="op">&gt;</span><span class="op">/</span><span class="num">4.</span> <span class="op">&lt;</span><span class="var">eb4</span> <span class="var">ab</span> <span class="var">c5</span> <span class="var">eb</span><span class="op">&gt;</span> <span class="op">&lt;</span><span class="var">c4</span> <span class="var">eb</span> <span class="var">gb</span> <span class="var">ab</span><span class="op">&gt;</span><span class="op">/</span><span class="num">2.</span>
    r<span class="op">/</span><span class="num">8</span> <span class="op">&lt;</span><span class="var">ab3</span> <span class="var">ab4</span><span class="op">&gt;</span><span class="op">/</span><span class="num">16</span> <span class="op">&lt;</span><span class="var">ab3</span> <span class="var">ab4</span><span class="op">&gt;</span> <span class="op">&lt;</span><span class="var">bb3</span> <span class="var">bb4</span><span class="op">&gt;</span> <span class="op">&lt;</span><span class="var">db4</span> <span class="var">db5</span><span class="op">&gt;</span> <span class="op">&lt;</span><span class="var">bb3</span> <span class="var">bb4</span><span class="op">&gt;</span> <span class="op">&lt;</span><span class="var">db4</span> <span class="var">db5</span><span class="op">&gt;</span>
  <span class="op">}</span>
  <span class="op">{</span>
    <span class="var">bb2</span><span class="op">/</span><span class="num">16</span> r <span class="var">bb</span> <span class="var">bb</span> <span class="var">bb</span> <span class="var">f3</span> <span class="var">eb</span> r <span class="var">eb</span> r <span class="var">ab</span> r <span class="var">ab</span> <span class="var">bb</span> <span class="var">ab</span> <span class="var">gb2</span>
    <span class="var">f</span> r <span class="var">f</span> <span class="var">f</span> <span class="var">f</span> <span class="var">c3</span> <span class="var">bb2</span> r <span class="var">bb</span> <span class="var">bb</span> <span class="var">c3</span> r <span class="var">bb2</span><span class="op">/</span><span class="num">8</span> r
    <span class="var">bb2</span><span class="op">/</span><span class="num">16</span> r <span class="var">bb</span> <span class="var">bb</span> <span class="var">bb</span> <span class="var">f3</span> <span class="var">eb</span> r <span class="var">eb</span> r <span class="var">eb</span> r <span class="var">eb</span> <span class="var">eb</span> r <span class="var">eb</span>
    <span class="var">ab2</span><span class="op">/</span><span class="num">16</span> r <span class="var">ab</span> <span class="var">ab</span> <span class="var">f</span> <span class="var">c3</span> <span class="var">bb2</span> <span class="var">ab</span> <span class="var">bb</span> r<span class="op">/</span><span class="num">8</span> <span class="var">bb</span><span class="op">/</span><span class="num">16</span> <span class="var">c3</span> <span class="var">bb2</span> <span class="var">ab</span> r
  <span class="op">}</span>
<span class="op">&gt;&gt;</span></code></pre>
		</section>
		<script src="keyboard.js"></script>
		<script src="interaction.js"></script>
		<script type="text/javascript">
			var _gaq = _gaq || [];
			_gaq.push(['_setAccount', 'UA-587112-7']);
			_gaq.push(['_trackPageview']);
			(function() {
				var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
				ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
				var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
			})();
		</script>
	</body>
</html>
