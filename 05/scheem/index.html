<!DOCTYPE html>
<html>
	<head>
		<title>Scheem interpreter</title>
		<link rel="stylesheet" type="text/css" href="../../css/styles.css">
		<link rel="stylesheet" type="text/css" href="../../lib/codemirror/codemirror.css">
		<script src="../../lib/jquery.min.js"></script>
		<script src="../../lib/codemirror/codemirror.js"></script>
		<script src="../../lib/codemirror/mode/scheme.js"></script>
		<script src="clone.js"></script>
		<script src="parser.js"></script>
		<script src="scheem.js"></script>
	</head>
	<body>
		<h1>Scheem interpreter</h1>
		<section id="editor-holder">
			<textarea id="editor" rows="10" cols="50" autofocus></textarea>
		</section>
		<aside id="results">
			<section id="error"></section>
			<section id="preview"></section>
			<section id="output"></section>
		</aside>
		<section id="examples">
			<h2>Examples</h2>
			<p>Click a heading to expand/collapse, and click an example to load into the editor.</p>

			<div class="group hidechildren">
			<h3>Simple examples</h3>
			<div>
			<pre class="example"><code>(<span class="op">+</span> <span class="num">4</span> <span class="num">2</span>)</code></pre>
			<pre class="example"><code>(<span class="op">+</span> <span class="num">4</span> <span class="num">2</span> (<span class="op">*</span> <span class="num">6</span> <span class="num">7</span>))</code></pre>
			<pre class="example"><code>(<span class="fn">if</span> (<span class="num">=</span> <span class="num">2</span> <span class="num">1</span>) (<span class="op">*</span> <span class="num">6</span> <span class="num">7</span>) (<span class="op">*</span> <span class="num">6</span> <span class="num">9</span>))</code></pre>
			<pre class="example"><code>(<span class="fn">begin</span> (<span class="fn">define</span> x <span class="num">6</span>) (<span class="fn">if</span> (<span class="num">=</span> <span class="num">2</span> <span class="num">1</span>) (<span class="op">*</span> x <span class="num">7</span>) (<span class="op">*</span> x <span class="num">9</span>)))</code></pre>
			<pre class="example"><code>(<span class="fn">begin</span> (<span class="fn">define</span> x '(<span class="num">6</span> <span class="num">7</span>)) (<span class="fn">car</span> x))</code></pre>
			<pre class="example"><code>(<span class="fn">begin</span> (<span class="fn">define</span> x '(<span class="num">6</span> <span class="num">7</span>)) (<span class="fn">cdr</span> x))</code></pre>
			<pre class="example"><code>(<span class="fn">begin</span> (<span class="fn">define</span> x '(<span class="num">6</span> <span class="num">7</span> <span class="num">8</span>)) (<span class="fn">car</span> (<span class="fn">cdr</span> x)))</code></pre>
			<pre class="example"><code>(<span class="fn">begin</span> (<span class="fn">define</span> x '(<span class="num">6</span> <span class="num">7</span> <span class="num">8</span>)) (<span class="fn">define</span> y <span class="num">13</span>) (<span class="fn">cons</span> y (<span class="fn">cdr</span> (<span class="fn">cdr</span> x))))</code></pre>
			</div>
			</div>

			<div class="group hidechildren">
			<h3>Complex examples</h3>

			<div>
			<h4>Factorial</h4>
			<pre class="example"><code>(begin (define factorial (lambda (x) (if (<= x 1) 1 (* x (factorial (- x 1))))))    (factorial 5) )</code></pre>

			<h4>Fibonacci</h4>
			<pre class="example"><code>(begin (define fibonacci (lambda (x) (if (<= x 1) 1 (+ (fibonacci (- x 1)) (fibonacci (- x 2))))))    (fibonacci 10) )</code></pre>

			<h4>Map</h4>
			<pre class="example"><code>(map (lambda (x) (+ x 1)) '(0 1 2 3 4 5 6 7 8 9))</code></pre>

			<h4>Reverse via foldl</h4>
			<pre class="example"><code>(foldl cons '() '(1 2 3 4 5))</code></pre>

			<h4>Sum via foldr</h4>
			<pre class="example"><code>(foldr + 0 '(1 2 3 4 5))</code></pre>

			<h4>Lambda with variable argument list</h4>
			<pre class="example"><code>(begin
  (define sum (lambda x (foldl + 0 x)))

  (sum 1 2 3 4)
)</code></pre>

			<h4>Algebraic Differentiation</h4>
			<pre class="example"><code>(begin

  (define variable? (lambda (x) (symbol? x)))
  (define same-variable? (lambda (v1 v2)
          (and (variable? v1) (variable? v2) (eq? v1 v2))))
  (define =number? (lambda (exp num)
          (and (number? exp) (= exp num))))

  (define make-sum (lambda (a1 a2)
    (cond ((=number? a1 0) a2)
          ((=number? a2 0) a1)
          ((and (number? a1) (number? a2)) (+ a1 a2))
          (else (list '+ a1 a2)))))
  (define make-product (lambda (m1 m2)
    (cond ((or (=number? m1 0) (=number? m2 0)) 0)
          ((=number? m1 1) m2)
          ((=number? m2 1) m1)
          ((and (number? m1) (number? m2)) (* m1 m2))
          (else (list '* m1 m2)))))

  (define sum? (lambda (x)
          (and (list? x) (eq? (car x) '+))))
  (define addend (lambda (s) (car (cdr s))))
  (define augend (lambda (s) (car (cdr (cdr s)))))

  (define product? (lambda (x)
          (and (list? x) (eq? (car x) '*))))
  (define multiplier (lambda (p) (car (cdr p))))
  (define multiplicand (lambda (p) (car (cdr (cdr p)))))

  (define diff (lambda (exp var)
    (cond ((number? exp) 0)
          ((variable? exp)
           (if (same-variable? exp var) 1 0))
          ((sum? exp)
           (make-sum (diff (addend exp) var)
                     (diff (augend exp) var)))
          ((product? exp)
           (make-sum
             (make-product (multiplier exp)
                           (diff (multiplicand exp) var))
             (make-product (diff (multiplier exp) var)
                           (multiplicand exp))))
          (else
           (error (cons '(unknown expression type) exp))))))

	;; usage: (diff [expr] [var]) to differentiate [expr] with respect to [var]

  (diff '(* x x) 'x)
)</code></pre>

			</div>

			</div>

		</section>
		<script src="lighttable.js"></script>
		<script src="interaction.js"></script>
	</body>
</html>
